<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
	<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>

	<body style="margin: 0px; overflow: hidden">
		<a-scene embedded arjs>
			<a-marker
				markerhandler
				preset="custom"
				type="pattern"
				url="../base/patterns/pattern-logo.patt"
				id="white"
			>
				<a-box position="0 0.5 0" color="white"></a-box>
			</a-marker>
			<a-marker markerhandler preset="hiro" id="red">
				<a-box position="0 0.5 0" color="red"></a-box>
			</a-marker>
			<a-marker markerhandler preset="kanji" id="yellow">
			</a-marker>
			<a-entity camera></a-entity>
		</a-scene>
		<script>
			let findWhite = false
      let findRed = false
      let white = document.querySelector("#white")
      let red = document.querySelector("#red")
			document
			  .querySelector("#white")
			  .addEventListener("markerFound", (e) => {
			    findWhite = true
			  });
			document
			  .querySelector("#red")
			  .addEventListener("markerFound", (e) => {
			    findRed = true
			  });
			document
			  .querySelector("#yellow")
			  .addEventListener("markerFound", (e) => {
          if (findRed && findWhite) {
            console.log(red.object3D.position)
            white.insertAdjacentHTML('beforeend', `<a-box position="${-red.object3D.position.x} ${red.object3D.position.y} ${0}" color="yellow"></a-box>`)
          }
			  });
        document
			  .querySelector("#red")
			  .addEventListener("markerLost", (e) => {
			    findRed = false
			  });
        document
			  .querySelector("#white")
			  .addEventListener("markerLost", (e) => {
			    findWhite = false
			  });
		</script>
	</body>
</html>
